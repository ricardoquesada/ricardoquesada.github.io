<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Posts | RETRO.MOE</title>
<meta name="keywords" content="">
<meta name="description" content="Posts - RETRO.MOE">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/posts/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fcb3718b9739f6b39cc36096f68dccc8a7e0d3e24fc6b09c575e0c25ec8f35b2.css" integrity="sha256-/LNxi5c59rOcw2CW9o3MyKfg0&#43;JPxrCcV14MJeyPNbI=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/posts/feed.xml">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lexend&display=swap" rel="stylesheet">

</head>

<body class="list" id="top">
<script>
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="RETRO.MOE (Alt + H)">RETRO.MOE</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/unijoysticle/" title="Unijoysticle‚Ñ¢">
                    <span>Unijoysticle‚Ñ¢</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/unijoysticle2/" title="Unijoysticle‚Ñ¢ 2">
                    <span>Unijoysticle‚Ñ¢ 2</span>
                </a>
            </li>
            <li>
                <a href="https://www.tindie.com/stores/riq/" title="Store">
                    <span>Store</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/contact/" title="Contact">
                    <span>Contact</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="üîç">
                    <span>üîç</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="http://localhost:1313/">Home</a></div>
  <h1>
    Posts
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">VChar64 v0.0.4 released, with xlink support
    </h2>
  </header>
  <div class="entry-content">
    <p>VChar64 v0.0.4 released! And thanks to Henning Bekel, VChar64 now supports xlink.
Changes since v0.0.2:
Added xlink support. For more info: http://henning-bekel.de/xlink/ Added Export As‚Ä¶ Export will export the current project with the previous exported values Added Tile support </p>
  </div>
  <footer class="entry-footer"><span title='2015-07-20 14:41:24 +0000 +0000'>July 20, 2015</span>&nbsp;¬∑&nbsp;1 min&nbsp;¬∑&nbsp;ricardoquesada</footer>
  <a class="entry-link" aria-label="post link to VChar64 v0.0.4 released, with xlink support" href="http://localhost:1313/2015/07/20/vchar64-v0-0-4-released-with-xlink-support/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Impressions of Google I/O 2015
    </h2>
  </header>
  <div class="entry-content">
    <p>What was interesting about the Keynote:
Brillo: the OS for the IoT‚Ä¶ but but but, there were no talks about it, almost no information about it, nothing. Android Studio with C&#43;&#43; support: Finally :) The NDK really needs love, and having an IDE that supports it is great. Hey, even Microsoft is supporting the NDK now in VS2015. Photos is decoupled from Google&#43; with free unlimited storage: This is great. I‚Äôve been using Picasa since day one and I never used Google&#43; to store my photos. So basically Photos is the same as Picasa, but with unlimited storage. Offline maps: Yeah Chrome Custom Tabs: Interesting alternative to present 3rd party views with the benefits of both the web and native worlds. What was not-that-interesting about the Keynote:
The rest. I don‚Äôt care if Android has better permissions or not (yeah, the old permissions-model sucked, but I don‚Äôt find that news interesting). The Family section for Google Play is good, but not interesting. Android Pay, meh. etc.
One thing that I liked, but was not announced on the Keynote, was Project Jacquard. They are using conductive threads and other stuff to create ‚Äúsmart‚Äù cloths. Something that Adafruit and Sparkfun have been doing for a while, BTW.
</p>
  </div>
  <footer class="entry-footer"><span title='2015-05-30 04:42:44 +0000 +0000'>May 30, 2015</span>&nbsp;¬∑&nbsp;3 min&nbsp;¬∑&nbsp;ricardoquesada</footer>
  <a class="entry-link" aria-label="post link to Impressions of Google I/O 2015" href="http://localhost:1313/2015/05/29/impressions-of-google-io-2015/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Soldering, what could go wrong?
    </h2>
  </header>
  <div class="entry-content">
    <p>I‚Äôm good at software engineering, but in electronics, I‚Äôm a newbie. Nonetheless, I find electronics fascinating.
Last year I did the first basic tutorials with Arduino, then I played a little bit with Raspberry Pi and CI20 (technically not really electronics). And this year, I built a very simple circuit to connect the RGBI output of my Commodore 128 to VGA‚Ä¶ I have been using breadboard, so no soldering, no PCB, or anything like that.
...</p>
  </div>
  <footer class="entry-footer"><span title='2015-04-12 05:03:26 +0000 +0000'>April 12, 2015</span>&nbsp;¬∑&nbsp;1 min&nbsp;¬∑&nbsp;ricardoquesada</footer>
  <a class="entry-link" aria-label="post link to Soldering, what could go wrong?" href="http://localhost:1313/2015/04/11/soldering-what-could-go-wrong/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Merging my unicycling and development blogs
    </h2>
  </header>
  <div class="entry-content">
    <p>Who has time to maintain two personal blogs ? It is even difficult to maintain just one. So what I did was to merge my unicycle ( monociclo.com.ar) blog into this one ( towp8.com).
I divided them in categories:
The unicycle blog is using the &#34; unicycle&#34; category. This blog is using the &#34; programming&#34; category </p>
  </div>
  <footer class="entry-footer"><span title='2015-04-10 01:10:56 +0000 +0000'>April 10, 2015</span>&nbsp;¬∑&nbsp;1 min&nbsp;¬∑&nbsp;ricardoquesada</footer>
  <a class="entry-link" aria-label="post link to Merging my unicycling and development blogs" href="http://localhost:1313/2015/04/09/merging-my-unicycling-and-development-blogs/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">VChar64: character editor for the Commodore 64
    </h2>
  </header>
  <div class="entry-content">
    <p> I started to code a unicycle game for the Commodore 64. The first thing that I realized was that I needed an game editor, so I started to code one: VChar64.
Today I released v0.0.1 which has basic functionality but the functionality that it has, just work. You can download it from here:
Download:¬†https://github.com/ricardoquesada/vchar64 Features:
Imports raw, PRG and CharPad file formats Exports to raw and PRG Basic editing functionality: Rotate, Invert, Clear, Shift left/right/up/down Multiplatform: Win, Linux and Mac Screenshot:
...</p>
  </div>
  <footer class="entry-footer"><span title='2015-02-10 20:45:23 +0000 +0000'>February 10, 2015</span>&nbsp;¬∑&nbsp;1 min&nbsp;¬∑&nbsp;ricardoquesada</footer>
  <a class="entry-link" aria-label="post link to VChar64: character editor for the Commodore 64" href="http://localhost:1313/2015/02/10/vchar64-character-editor-for-the-commodore-64/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Coding for the Commodore 64: What changed in the last 25 years
    </h2>
  </header>
  <div class="entry-content">
    <p>
I stopped developing for the¬†Commodore 64 in 1993. Since then a lot has¬†happened:
Back in¬†late 80‚Äôs ~¬†beginning¬†of 90‚Äôs:
I did all my coding using the Commodore 128‚Äôs¬†MONITOR¬†command
That means no text editor, no compiler, no linker. Similar to the debug.com¬†command that used to be in DOS Since I didn‚Äôt use a¬†text editor, I put all my comments in a notepad (I still have that notepad somewhere)
I used the Commodore 128‚Äôs SPRDEF¬†as the Sprite editor
I used my own character editor called vchar‚Ä¶ (later I created a similar one for DOS and Linux)
I did some basic graphics using a graphics editor‚Ä¶ but I can‚Äôt remember which one
I didn‚Äôt know any other C64 developer, so I did everything kind of isolated
My sources of information were¬†Commodore Magazine, Tu Micro Commodore¬†and some books I reversed engineer some games / demos in order to learn tricks I had¬†a 300 bps modem but I didn‚Äôt find any good C64 BBS I did some cracks for a local company that was ‚Äúpublishing‚Äù (AKA pirating) games. In exchange they¬†were providing me games. To put things into perspective¬†it was impossible (I mean IMPOSSIBLE) to get original games in Argentina back then. I knew some basic tricks like how to use more than 8 sprites, how to open the top and bottom borders, some raster effects‚Ä¶ but nothing very advanced.
I loaded all my programs / games using the disk drive, which was much faster than the datasette, but still very slow
I had a fast-loader cartridge to accelerate the disk drive loading times. It also had a rudimentary MONITOR.
Although Argentina was using the PAL-N standard I had¬†a NTSC Commodore 128. In Argentina we also had the Argentinean Commodore, called Drean Commodore, which was a PAL-N machine assembled in Argentina
</p>
  </div>
  <footer class="entry-footer"><span title='2015-02-02 06:17:03 +0000 +0000'>February 2, 2015</span>&nbsp;¬∑&nbsp;4 min&nbsp;¬∑&nbsp;ricardoquesada</footer>
  <a class="entry-link" aria-label="post link to Coding for the Commodore 64: What changed in the last 25 years" href="http://localhost:1313/2015/02/01/coding-for-the-commodore-64-what-happened-in-the-last-25-years/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Switching from iOS to Android: My experience
    </h2>
  </header>
  <div class="entry-content">
    <p>For the past 5 or 6 years, I used iPhones as my default phones. But a few months ago I decided to switch to Android.
I tried Android devices before, but never as my default phone.¬†At the beginning I started using a Samsung Galaxy S4 (a 2013 5&#34; device), but later I switch to a Xiaomi MI4 (a 2014 5&#34; device with better specs).
Without further ado, this is my feedback:
Launcher In case you don‚Äôt know what the launcher is, think of the shell that allows you to launch the applications. It is the first thing that appears when you turn on the phone. In a way, it defines the UX.
Each phone maker customize the Android launcher according to its¬†needs. And you can also download 3rd party launchers. This is both a good thing and a bad thing.
The bad thing is that every phone maker have¬†a different launcher, making it difficult to switch to other Android devices, since the UX is different. Google has its own launcher called Google Now Launcher, and tries hard to make sure that Android makers don‚Äôt differ too much from it, although that is not always true. Samsung, as an example, ships its phones with a launcher called TouchWiz.¬†It doesn‚Äôt differ that¬†much from Google Now Launcher, but its changes make it a worse phone, not a better one.¬†Xiaomi, on the other hand, ships its phones with a completely different launcher which makes your Android device behave like an iOS device.
The good thing is that you can use¬†a different launcher if you don‚Äôt like the default one (or create your own). This as a good thing because everything that can be configured, changed or replaced is an opportunity for innovation (see below).
</p>
  </div>
  <footer class="entry-footer"><span title='2014-12-25 01:37:57 +0000 +0000'>December 25, 2014</span>&nbsp;¬∑&nbsp;8 min&nbsp;¬∑&nbsp;ricardoquesada</footer>
  <a class="entry-link" aria-label="post link to Switching from iOS to Android: My experience" href="http://localhost:1313/2014/12/24/switching-from-ios-to-android-my-experience/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Que paso en lo que va del a√±o
    </h2>
  </header>
  <div class="entry-content">
    <p>Lo primero que pas√≥ es que en Octubre 2014 fui padre y eso significa, adem√°s de tener una enorme felicidad, es que ya no tengo tanto tiempo como antes. Y eso significa que tuve menos tiempo para andar en monociclo y menos tiempo para escribir en el blog. Pero para hacer un resumen, esto es lo que pas√≥:
Fui¬†a Unicon XVII¬†en Canada, y particip√© en Basket ‚ÄúA‚Äù, en Hockey ‚ÄúB‚Äù, en Muni Downhill ‚ÄúAdvanced‚Äù, en Muni Uphill, en Muni Cross-Country ‚ÄúAdvanced‚Äù. Muy muy divertido, en Agosto 2014 Hice el San Francisco Uni Tour en Septiembre 2014 Fui al California Muni Weekend en Los Angeles en Octubre 2014 Y segu√≠ jugando as basket todos los martes en Berkeley Y trat√© de hacer Muni una vez por semana, aunque a veces no se podia. Fotos, aca.
...</p>
  </div>
  <footer class="entry-footer"><span title='2014-11-10 09:22:30 +0000 +0000'>November 10, 2014</span>&nbsp;¬∑&nbsp;1 min&nbsp;¬∑&nbsp;ricardoquesada</footer>
  <a class="entry-link" aria-label="post link to Que paso en lo que va del a√±o" href="http://localhost:1313/2014/11/10/que-paso-en-lo-que-va-del-ano/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Integrating LiquidFun with Cocos2d-x: Part II
    </h2>
  </header>
  <div class="entry-content">
    <p>In Part I I described to how integrated LiquidFun with Cocos2d-x. In this part (part II) I‚Äôll describe how to render the particles using a basic water effect.
Part I uses just one glDrawArrays(GL_POINTS, 0, total); to draw the particles. And although that works to draw ‚Äúparticles‚Äù, it is not enough to draw ‚Äúwater‚Äù.
Drawing ‚Äúwater‚Äù requires a more complex rendering algorithm, like the one used in this example. And implementing an algorithm similar that one is what this article describes.
The algorithm works more or less like this:
Choose a white circle and blur it. You can blur the circle at runtime Or you can blur it off-line. Create an a new frame-buffer (think of a clean off-screen buffer where you can render whatever you want) Render the particles into the newly created frame-buffer using the blurred circle Now render the frame-buffer into the main color-buffer using a threshold. The threshold could be something like this: If pixel.r &lt; 0.1, discard the pixel (the pixel won‚Äôt be drawn) If pixel.r &lt; 0.2, draw a blue pixel (for the border, although this is optional) else draw a white pixel (the inner part of the water) How to do it using Cocos2d-x and LiquidFun Let‚Äôs take the LFParticleSystemNode from Part I, and ‚Äúevolve‚Äù it:
The first thing to do is to add the ‚Äúoff-screen‚Äù frame-buffer into the LFParticleSystemNode class. In Cocos2d-x, the ‚Äúoff-screen‚Äù buffers are created with the RenderTexture class. Example:
[code language=‚Äúcpp‚Äù] bool LFParticleSystemNode::init(b2ParticleSystem* particleSystem, float ratio) { ‚Ä¶ // create an off-screen frame-buffer with the size of the screen auto s = Director::getInstance()-&gt;getWinSize(); _renderTexture = cocos2d::RenderTexture::create(s.width, s.height, Texture2D::PixelFormat::RGBA8888); this-&gt;addChild(_renderTexture); _renderTexture-&gt;setAnchorPoint(Point::ANCHOR_MIDDLE); _renderTexture-&gt;setPosition(Point(s.width/2, s.height/2));
// Change the default shader. Use a the threshold shader auto program = GLProgram::createWithByteArrays(_renderTextureShaderVert, _renderTextureShaderFrag); auto programState = GLProgramState::getOrCreateWithGLProgram(program); programState-&gt;setUniformFloat(‚Äúu_threshold_discard‚Äù, 0.15); programState-&gt;setUniformFloat(‚Äúu_threshold_border‚Äù, 0.3);
‚Ä¶ } [/code]
And, as mentioned earlier, the RenderTexture (the off-screen frame-buffer) needs a shader with a threshold. The threshold shader should look like the following:
[code language=‚Äúcpp‚Äù] varying vec4 v_fragmentColor; varying vec2 v_texCoord; uniform float u_threshold_discard; uniform float u_threshold_border;
void main() { vec4 color = v_fragmentColor * texture2D(CC_Texture0, v_texCoord); if( color.r &lt; u_threshold_discard) // black or discard color = vec4(0,0,0,0); else if( color.r &lt; u_threshold_border) // blue for the border color = vec4(0.2,0.2,0.9,1); else // white for the center color = vec4(1,1,1,1); gl_FragColor = color; } [/code]
The values u_threshold_discard, and u_threshold_border are defined at runtime. In the example, they are set at 0.15 and 0.3 respectively.
The next thing to do is, to render the particles in the RenderTexture.
[code language=‚Äúcpp‚Äù]void LFParticleSystemNode::draw(Renderer *renderer, const Mat4 &amp;transform, uint32_t transformFlags) { // tell RenderTexture to ‚Äúcapture‚Äù the particles _renderTexture-&gt;beginWithClear(0,0,0,0);
_customCommand.init(_globalZOrder); _customCommand.func = CC_CALLBACK_0(LFParticleSystemNode::onDraw, this, transform, transformFlags); renderer-&gt;addCommand(&amp;_customCommand);
// tell RenderTexture to stop ‚Äúcapturing‚Äù the particles _renderTexture-&gt;end(); } [/code]
The result is the following </p>
  </div>
  <footer class="entry-footer"><span title='2014-07-30 20:45:00 +0000 +0000'>July 30, 2014</span>&nbsp;¬∑&nbsp;4 min&nbsp;¬∑&nbsp;ricardoquesada</footer>
  <a class="entry-link" aria-label="post link to Integrating LiquidFun with Cocos2d-x: Part II" href="http://localhost:1313/2014/07/30/integrating-liquidfun-with-cocos2d-x-part-ii/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">WWDC 2014 announcements as a game developer
    </h2>
  </header>
  <div class="entry-content">
    <p>At WWDC 2014, Apple announced new features for iOS and OS X. These are my thoughts:
Swift Swift is a new programming language by Apple.
At first sight, it seems to be easier to learn and easier to master than Objective-C. Objective-C is not particular difficult to learn and master, but its syntax looks foreign to C# / C&#43;&#43; / Python developers.
Swift, on the other hand, has a more conventional design. You can read Swift code the same way you can read C# code, even if you are not a Swift or C# developer.
Swift is a compiled language, although it looks like an scripting language. It is strongly typed, it is object-oriented with functional features. It does not have garbage collection. It uses ARC instead.
You can call any Objective-C API from Swift (at least Apple‚Äôs APIs) , and Apple claims it is faster than Objective-C. Objective-C wasn‚Äôt the fastest language out there, but it wasn‚Äôt particularly slow either.
Perhaps the killer feature for me is Playground, a kind of sandbox for testing ideas / rapid development / rapid prototyping. BTW, Playground seems to be inspired (or copied if you prefer) from Bret Victor‚Äôs Inventing on Principle talk, which is a MUST WATCH video for everybody.
Also, Swift has pretty much what John Siracusa asked for in his Copland 2010 article.
So, if Swift is easier to learn, easier to master, less error-prone, faster to develop code, performs better than Objective-C and you can call Objective-C code from it, why Apple should keep adding features to Objective-C ?
I expect that:
Objective-C code will be supported on iOS / OS X for the foreseeable future. But new APIs will be added on Swift only. Developers will be forced to migrate to Swift to use the new ones (similar to what happened years ago with Carbon vs. Cocoa APIs ). Unknowns:
Can you call any Objective-C library from it ? or only Apple‚Äôs APIs ? Will Apple release the binding generator ? [UPDATE]: Yes, it is possible to call 3rd party Obj-C libraries from Swift. Will Apple open source the language ? Or at least submit the language to the standard committee ? Can you call C and/or C&#43;&#43; libraries from it ? For me:
Swift is a very attractive language, so if Apple decides to open source it, it has the potential to gain a lot of developers from other platforms as well. I would definitely use it, and would seriously analyze the possibility of porting cocos2d to it. Bret Victor‚Äôs Inventing on Principle was very inspiring. Since the day I watched that video, I wanted to add similar features to cocos2d. Playground showed us that it is possible to do it with a compiled language. </p>
  </div>
  <footer class="entry-footer"><span title='2014-06-03 17:59:57 +0000 +0000'>June 3, 2014</span>&nbsp;¬∑&nbsp;5 min&nbsp;¬∑&nbsp;ricardoquesada</footer>
  <a class="entry-link" aria-label="post link to WWDC 2014 announcements as a game developer" href="http://localhost:1313/2014/06/03/wwdc-2014-announcements-and-the-game-developers/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="http://localhost:1313/posts/page/8/">
      ¬´&nbsp;Prev&nbsp;
    </a>
    <a class="next" href="http://localhost:1313/posts/page/10/">Next&nbsp;&nbsp;¬ª
    </a>
  </nav>
</footer>
    </main>
    
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
</body>

</html>
